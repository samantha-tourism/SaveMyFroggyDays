{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/Samantha/Documents/Education/Wild/Projet2/final/remote-js-202011-froggy-devs/src/components/Search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport \"./Search.css\";\nimport Img from \"../Image/setting.png\";\nimport apiKey from \"./ApiKeyMeteo\";\nimport Filter from \"./Filter\";\nimport * as AiIcons from \"react-icons/ai\";\nimport * as BiIcons from \"react-icons/bi\";\n\nconst Search = props => {\n  _s();\n\n  const [cityName, setCityName] = useState(\"\");\n  const [show, setShow] = useState(false);\n  const [showwhen, setShowwhen] = useState(false);\n  const [meteo, setMeteo] = useState([]);\n  const [dropdown, setDropdown] = useState(\"Tomorrow\");\n  const [day, setDay] = useState([]);\n\n  const getLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(getCoordinates);\n    } else {\n      alert(\"Geolocation is not supported by this browser\");\n    }\n  };\n\n  useEffect(() => {\n    getLocation();\n  }, []);\n\n  const getCoordinates = position => {\n    const city = fetch(`http://api.openweathermap.org/data/2.5/weather?lat=${position.coords.latitude}&lon=${position.coords.longitude}&appid=${apiKey}`).then(res => res.json()).then(res => setCityName(res.name));\n  };\n\n  const handleChange = event => {\n    setCityName(event.target.value);\n  };\n\n  const search = evt => {\n    if (!cityName) return; //weatherbis\n\n    fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${cityName}&appid=${apiKey}`).then(res => res.json()).then(result => {\n      setMeteo(result.list);\n      props.passCity(\"\");\n      props.passCity(cityName);\n    }).then(res => {\n      if (res) props.passCity(res.city.name);\n    });\n  };\n\n  useEffect(() => {\n    props.passCity(\"\");\n    props.passCity(cityName);\n    if (meteo) props.passMeteoLater(meteo.find(meteoInTime => meteoInTime.dt_txt.includes(\"12:00:00\") && dtToDate(meteoInTime.dt).includes(day)));\n  }, [meteo, day]);\n  let today = new Date();\n  let tomorrow = new Date();\n  tomorrow.setDate(today.getDate() + 1);\n  let dayTwo = new Date();\n  dayTwo.setDate(today.getDate() + 2);\n  let dayThree = new Date();\n  dayThree.setDate(today.getDate() + 3);\n  let dayFour = new Date();\n  dayFour.setDate(today.getDate() + 4);\n\n  const localString = date => {\n    return date.toLocaleDateString();\n  };\n\n  const dtToDate = dt => {\n    return new Date(dt * 1000).toLocaleString();\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!showwhen) props.loadweather(e);else {\n      search();\n    }\n  };\n\n  const filters = [{\n    checked: props.filterAdult,\n    filterName: \"Adult\",\n    filterPic: /*#__PURE__*/_jsxDEV(AiIcons.AiFillHome, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 18\n    }, this),\n    passChecked: props.passFilterAdult\n  }, {\n    checked: props.filterRest,\n    filterName: \"Food\",\n    filterPic: /*#__PURE__*/_jsxDEV(BiIcons.BiRestaurant, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 18\n    }, this),\n    passChecked: props.passFilterRest\n  }, {\n    checked: props.filterRelig,\n    filterName: \"Religion\",\n    filterPic: /*#__PURE__*/_jsxDEV(BiIcons.BiChurch, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 18\n    }, this),\n    passChecked: props.passFilterRelig\n  }, {\n    checked: props.filterShop,\n    filterName: \"Shopping\",\n    filterPic: /*#__PURE__*/_jsxDEV(AiIcons.AiFillShopping, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 18\n    }, this),\n    passChecked: props.passFilterShop\n  }, {\n    checked: props.filterSport,\n    filterName: \"Sport\",\n    filterPic: /*#__PURE__*/_jsxDEV(BiIcons.BiRun, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 18\n    }, this),\n    passChecked: props.passFilterSport\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"searchFunction\",\n    className: `i${props.icon}`,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"discoverActivity\",\n      children: \"Discover Your Activity\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"descriptionDiscover\",\n      children: \"Even if the weather is bad, there is an activity for you!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: props.error ? error() : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"formInput\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputSearchBar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"locationSearchBar\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"city\",\n            type: \"text\",\n            placeholder: \"City\",\n            value: cityName,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"when\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"letsGo\",\n            children: \"GO!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Later\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"later\",\n            type: \"checkbox\",\n            onChange: () => {\n              setShowwhen(!showwhen);\n              props.toggleLater();\n              search();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), showwhen ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: dropdown,\n                  onChange: e => {\n                    setDropdown(e.target.value);\n                    setDay(e.target.value);\n                  },\n                  className: \"dropdownLater\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: localString(tomorrow),\n                    children: \"Tomorrow\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: localString(dayTwo),\n                    children: \"dans 2 jours\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: localString(dayThree),\n                    children: \"dans 3 jours\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: localString(dayFour),\n                    children: \"dans 4 jours\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 11\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"filterDescription\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"textFilter\",\n            children: \" Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: Img,\n            alt: \"setting\",\n            id: \"setting\",\n            onClick: () => setShow(!show)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), show ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"filterContainer\",\n        children: filters.map((f, i) => /*#__PURE__*/_jsxDEV(Filter, {\n          checked: f.checked,\n          filterName: f.filterName,\n          filterPic: f.filterPic,\n          passChecked: f.passChecked\n        }, f.filterName + i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        id: \"send\",\n        children: [\" \", \"Search\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errorWeather\",\n        children: props.error ? error() : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Search, \"Ji/Ka4zDvwmteeWaoEfLCjMQht4=\");\n\n_c = Search;\n\nfunction error() {\n  return \"Please enter city! üê∏\";\n}\n\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/Samantha/Documents/Education/Wild/Projet2/final/remote-js-202011-froggy-devs/src/components/Search.js"],"names":["React","useState","useEffect","Img","apiKey","Filter","AiIcons","BiIcons","Search","props","cityName","setCityName","show","setShow","showwhen","setShowwhen","meteo","setMeteo","dropdown","setDropdown","day","setDay","getLocation","navigator","geolocation","getCurrentPosition","getCoordinates","alert","position","city","fetch","coords","latitude","longitude","then","res","json","name","handleChange","event","target","value","search","evt","result","list","passCity","passMeteoLater","find","meteoInTime","dt_txt","includes","dtToDate","dt","today","Date","tomorrow","setDate","getDate","dayTwo","dayThree","dayFour","localString","date","toLocaleDateString","toLocaleString","handleSubmit","e","preventDefault","loadweather","filters","checked","filterAdult","filterName","filterPic","passChecked","passFilterAdult","filterRest","passFilterRest","filterRelig","passFilterRelig","filterShop","passFilterShop","filterSport","passFilterSport","icon","error","toggleLater","map","f","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./Search.css\";\r\nimport Img from \"../Image/setting.png\";\r\nimport apiKey from \"./ApiKeyMeteo\";\r\nimport Filter from \"./Filter\";\r\nimport * as AiIcons from \"react-icons/ai\";\r\nimport * as BiIcons from \"react-icons/bi\";\r\n\r\nconst Search = (props) => {\r\n  const [cityName, setCityName] = useState(\"\");\r\n  const [show, setShow] = useState(false);\r\n  const [showwhen, setShowwhen] = useState(false);\r\n  const [meteo, setMeteo] = useState([]);\r\n  const [dropdown, setDropdown] = useState(\"Tomorrow\");\r\n  const [day, setDay] = useState([]);\r\n\r\n  const getLocation = () => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(getCoordinates);\r\n    } else {\r\n      alert(\"Geolocation is not supported by this browser\");\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    getLocation();\r\n  }, []);\r\n\r\n  const getCoordinates = (position) => {\r\n    const city = fetch(\r\n      `http://api.openweathermap.org/data/2.5/weather?lat=${position.coords.latitude}&lon=${position.coords.longitude}&appid=${apiKey}`,\r\n    )\r\n      .then((res) => res.json())\r\n      .then((res) => setCityName(res.name));\r\n  };\r\n  const handleChange = (event) => {\r\n    setCityName(event.target.value);\r\n  };\r\n\r\n  const search = (evt) => {\r\n    if (!cityName) return;\r\n    //weatherbis\r\n    fetch(\r\n      `https://api.openweathermap.org/data/2.5/forecast?q=${cityName}&appid=${apiKey}`,\r\n    )\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setMeteo(result.list);\r\n        props.passCity(\"\");\r\n        props.passCity(cityName);\r\n      })\r\n      .then((res) => {\r\n        if (res) props.passCity(res.city.name);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    props.passCity(\"\");\r\n    props.passCity(cityName);\r\n    if (meteo) props.passMeteoLater(\r\n      meteo.find(\r\n        (meteoInTime) =>\r\n          meteoInTime.dt_txt.includes(\"12:00:00\") &&\r\n          dtToDate(meteoInTime.dt).includes(day),\r\n      ),\r\n    );\r\n  }, [meteo, day]);\r\n\r\n  let today = new Date();\r\n\r\n  let tomorrow = new Date();\r\n  tomorrow.setDate(today.getDate() + 1);\r\n\r\n  let dayTwo = new Date();\r\n  dayTwo.setDate(today.getDate() + 2);\r\n\r\n  let dayThree = new Date();\r\n  dayThree.setDate(today.getDate() + 3);\r\n\r\n  let dayFour = new Date();\r\n  dayFour.setDate(today.getDate() + 4);\r\n\r\n  const localString = (date) => {\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  const dtToDate = (dt) => {\r\n    return new Date(dt * 1000).toLocaleString();\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!showwhen) props.loadweather(e);\r\n    else {\r\n      search();\r\n    }\r\n  };\r\n\r\n  const filters = [\r\n    {\r\n      checked: props.filterAdult,\r\n      filterName: \"Adult\",\r\n      filterPic: <AiIcons.AiFillHome />,\r\n      passChecked: props.passFilterAdult,\r\n    },\r\n    {\r\n      checked: props.filterRest,\r\n      filterName: \"Food\",\r\n      filterPic: <BiIcons.BiRestaurant />,\r\n      passChecked: props.passFilterRest,\r\n    },\r\n    {\r\n      checked: props.filterRelig,\r\n      filterName: \"Religion\",\r\n      filterPic: <BiIcons.BiChurch />,\r\n      passChecked: props.passFilterRelig,\r\n    },\r\n    {\r\n      checked: props.filterShop,\r\n      filterName: \"Shopping\",\r\n      filterPic: <AiIcons.AiFillShopping />,\r\n      passChecked: props.passFilterShop,\r\n    },\r\n    {\r\n      checked: props.filterSport,\r\n      filterName: \"Sport\",\r\n      filterPic: <BiIcons.BiRun />,\r\n      passChecked: props.passFilterSport,\r\n    },\r\n  ];\r\n  return (\r\n    <div id=\"searchFunction\" className={`i${props.icon}`}>\r\n      <p className=\"discoverActivity\">Discover Your Activity</p>\r\n      <p className=\"descriptionDiscover\">\r\n        Even if the weather is bad, there is an activity for you!\r\n      </p>\r\n\r\n      <div>{props.error ? error() : null}</div>\r\n      <form className=\"formInput\" onSubmit={handleSubmit}>\r\n        <div className=\"inputSearchBar\">\r\n          <div className=\"locationSearchBar\">\r\n            <input\r\n              id=\"city\"\r\n              type=\"text\"\r\n              placeholder=\"City\"\r\n              value={cityName}\r\n              onChange={handleChange}\r\n            ></input>\r\n          </div>\r\n\r\n          <div className=\"when\">\r\n            {\" \"}\r\n            <span className=\"letsGo\">GO!</span>\r\n            <p>Later</p>\r\n            <input\r\n              id=\"later\"\r\n              type=\"checkbox\"\r\n              onChange={() => {\r\n                setShowwhen(!showwhen);\r\n                props.toggleLater();\r\n                search();\r\n              }}\r\n            />\r\n             {showwhen ? (\r\n          <div>\r\n            <div>\r\n              <div>\r\n                <select\r\n                  value={dropdown}\r\n                  onChange={(e) => {\r\n                    setDropdown(e.target.value);\r\n                    setDay(e.target.value);\r\n                  }}\r\n                  className='dropdownLater'\r\n                >\r\n                  <option value={localString(tomorrow)}>Tomorrow</option>\r\n                  <option value={localString(dayTwo)}>dans 2 jours</option>\r\n                  <option value={localString(dayThree)}>dans 3 jours</option>\r\n                  <option value={localString(dayFour)}>dans 4 jours</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n          </div>\r\n\r\n          <div id=\"filterDescription\">\r\n            <p id=\"textFilter\"> Categories</p>\r\n            <img\r\n              src={Img}\r\n              alt=\"setting\"\r\n              id=\"setting\"\r\n              onClick={() => setShow(!show)}\r\n            ></img>\r\n          </div>\r\n        </div>\r\n        \r\n        {show ? (\r\n          <ul className= \"filterContainer\">\r\n            {filters.map((f, i) => (\r\n              <Filter\r\n                key={f.filterName + i}\r\n                checked={f.checked}\r\n                filterName={f.filterName}\r\n                filterPic={f.filterPic}\r\n                passChecked={f.passChecked}\r\n              />\r\n            ))}\r\n          </ul>\r\n        ) : null}\r\n        <button type=\"submit\" id=\"send\">\r\n          {\" \"}\r\n          Search\r\n        </button>\r\n        <div className=\"errorWeather\">{props.error ? error() : null}</div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction error() {\r\n  return \"Please enter city! üê∏\";\r\n}\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}